plugins {
    id 'net.neoforged.moddev'
}

repositories {
    maven { url 'https://raw.githubusercontent.com/Stein-N/resources/main/maven' }
}

dependencies {
    implementation(project(":common"))
    implementation "net.xstopho.resourceconfigapi:resourceconfigapi-neoforge:${resource_config_api}"
    implementation "net.xstopho.resourcelibrary:resourcelibrary-neoforge:${resource_library}"
}

compileJava {
    source(project(':common').sourceSets.main.allSource)
}

neoForge {
    version = neoforge_version

    parchment {
        minecraftVersion = parchment_mc_version
        mappingsVersion = parchment_version
    }

    runs {
        configureEach {
            gameDirectory = project.file("runs/${it.name.toLowerCase()}")
        }
        data {
            clientData()
            ideName = "Common Datagen"
            gameDirectory = file('../common/runs/data')
            programArguments = ['--mod', project.mod_id, '--all', '--output', file('../common/src/generated/').getAbsolutePath(), '--existing', file('../common/src/main/resources/').getAbsolutePath()]
        }
    }
    mods {
        "${mod_id}" { sourceSet sourceSets.main }
    }
}